<div class="addTask d-flex flex-column">


  <div class="modal" id="#addTask" tabindex="-1" role="dialog" [ngStyle]="{'display':displayStyleAddTask}">

    <div class="modal-dialog   modal-dialog-centered" style="max-width: 70%;" role="document">

      <div class="modal-content">

        <div class="modal-header">
          <h4 class="modal-title">Add new Task </h4>
          <span class="badge badge-primary badge-pill badge-danger"><i (click)="closePopup()" class="fa fa-times"
              aria-hidden="true"></i></span>
        </div>
        <br>
        <span class="addTaskItem">
          <form #addNewTask="ngForm" (ngSubmit)="done()">
            <fieldset [disabled]="this.disableForm">
              <div class="container">


                <div class="form-row " *ngFor="let obj of newTaskList; let i=index">

                  <div class="form-group col-md-2"><input type="taskTitle" name="taskTitle{{i}}"
                      [(ngModel)]="obj.taskTitle" #newTaskTitle = "ngModel" id="newTaskTitle" required minlength="4" placeholder="Title" class="form-control"></div>

                  <div class="error"
                    *ngIf="!newTaskTitle?.valid && (newTaskTitle?.dirty || newTaskTitle?.touched)">

                    <!-- <span *ngIf="newTaskTitle.errors?.['required']">
                       required
                    </span>
                    <span *ngIf="newTaskTitle.errors?.['minlength']">
                      Task Title Minimum Length is
                      {{newTaskTitle.errors?.["minlength"]["requiredLength"]}}
                    </span> -->
                  </div>

                  <div class="form-group col-md-4">

                    <textarea id="newTaskTypeDesc" rows="4" required minlength="10" onfocus="this.value=''" placeholder="  Description"
                      class="form-control" value="" #newTaskTypeDesc = "ngModel" [(ngModel)]="obj.taskDescription" name="taskDescription{{i}}"
                      class="form-control ">

                      </textarea>
                      <span class="error"
                      *ngIf="!newTaskTypeDesc?.valid && (newTaskTypeDesc?.dirty || newTaskTypeDesc?.touched)">
  
                      <span *ngIf="newTaskTypeDesc.errors?.['required']">
                        Task Description is required
                      </span>
                      <span *ngIf="newTaskTypeDesc.errors?.['minlength']">
                        Task Description Minimum Length is
                        {{newTaskTypeDesc.errors?.["minlength"]["requiredLength"]}}
                      </span>
                    </span>  
                  </div>

                  <div class="form-group col-md-3">


                    <select id = "ownedby" #ownedby= "ngModel"  required class="form-select form-select-sm form-control" aria-label=".form-select-sm example"
                      required name="taskOwnedBy{{i}}" [(ngModel)]="obj.taskOwnedBy">
                      <option hidden value="">Owned By</option>
                      <option *ngFor="let admin of adminsList" [value]="admin.name">{{admin.name}}</option>


                    </select>
                    <span class="error"
                    *ngIf="!ownedby?.valid && (ownedby?.dirty || ownedby?.touched)">

                    <span *ngIf="ownedby.errors?.['required']">
                      Task Owned By is required
                    </span>
                    
                  </span>  
                    
                  </div>


                  <div class="form-group col-md-1">
                    <input type="number" id="dueDays" required #dueDays = "ngModel" name="dueDays{{i}}" value="" [(ngModel)]="obj.dueDays" placeholder="days"
                      class="form-control">
                      <span class="error"
                    *ngIf="!dueDays?.valid && (dueDays?.dirty || dueDays?.touched)">

                    <span *ngIf="dueDays.errors?.['required']">
                     Due Days is required
                    </span>
                    
                  </span> 

                  </div>


                  <div class="form-group col-md-1" required>

                    <span class="radio" >
                      <label>
                        <input type="radio" name="daysType{{i}}" id="daysType" #daysType="ngModel" required  value="before" [(ngModel)]="obj.daysType"> before
                      </label>
                      <label>
                        <input type="radio" name="daysType{{i}}" id="daysType" #daysType="ngModel"  required value="after" [(ngModel)]="obj.daysType"> after
                      </label>


                    </span>
                    <span class="error"
                    *ngIf="!daysType?.valid && (daysType?.dirty || daysType?.touched)">

                    <span *ngIf="daysType.errors?.['required']">
                      Task completion day type is required
                    </span>
                    
                  </span> 
                  </div>

                  <div class="form-group">
                    <button (click)="removeForm(i)" class="btn btn-outline-danger remove"
                      *ngIf="i!=0 && this.isButtonVisible">
                      <i class="fa-solid fa-minus"></i>
                    </button>
                  </div>
                </div>
                <span>
                  <button type="button" (click)="addForm()" *ngIf="this.isButtonVisible"
                    class="btn btn-outline-success">
                    <i class="fa-solid fa-add"></i>
                  </button>
                </span>

              </div>
            </fieldset>
            <br>


            <div class="modal-body d-flex editpop">

              <span>

              </span>

            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-outline-success" [disabled]="!addNewTask.valid">
                Save
              </button>

              <button type="button" class="btn btn-outline-danger" (click)="closePopup()">
                Close
              </button>


            </div>

          </form>
        </span>

        <!-- </form> -->

      </div>

    </div>

  </div>

</div>